\hypertarget{_c_i2_c1_8c}{}\doxysection{C\+:/\+Users/\+Michael/\+Documents/\+Git\+Hub/\+M\+C\+U\+X\+\_\+workspace/\+M\+C\+U\+X\+\_\+\+P\+E\+\_\+\+K\+L25\+Z\+\_\+\+F\+R\+T\+O\+S\+\_\+\+Shieldw\+Fat\+F\+S/\+Generated\+\_\+\+Code/\+C\+I2\+C1.c File Reference}
\label{_c_i2_c1_8c}\index{C:/Users/Michael/Documents/GitHub/MCUX\_workspace/MCUX\_PE\_KL25Z\_FRTOS\_ShieldwFatFS/Generated\_Code/CI2C1.c@{C:/Users/Michael/Documents/GitHub/MCUX\_workspace/MCUX\_PE\_KL25Z\_FRTOS\_ShieldwFatFS/Generated\_Code/CI2C1.c}}


This component encapsulates the internal I2C communication interface. The implementation of the interface is based on the Philips I2\+C-\/bus specification version 2.\+0. Interface features\+: M\+A\+S\+T\+ER mode.  


{\ttfamily \#include \char`\"{}G\+I2\+C1.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}C\+I2\+C1.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}P\+O\+R\+T\+\_\+\+P\+D\+D.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}I2\+C\+\_\+\+P\+D\+D.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Free\+R\+T\+O\+S.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}I\+O\+\_\+\+Map.\+h\char`\"{}}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_c_i2_c1___t_device_data}{C\+I2\+C1\+\_\+\+T\+Device\+Data}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries M\+A\+S\+T\+E\+R\+\_\+\+I\+N\+\_\+\+P\+R\+O\+G\+R\+ES}~0x01U  /$\ast$ Communication is in progress (Master) $\ast$/
\item 
\#define {\bfseries A\+D\+D\+R\+\_\+\+C\+O\+M\+P\+L\+E\+TE}~0x02U  /$\ast$ 10-\/bit address transmission complete   $\ast$/
\item 
\#define {\bfseries R\+E\+P\+\_\+\+A\+D\+D\+R\+\_\+\+C\+O\+M\+P\+L\+E\+TE}~0x04U  /$\ast$ repeated address transmission complete $\ast$/
\item 
\#define {\bfseries G\+E\+N\+E\+R\+A\+L\+\_\+\+C\+A\+LL}~0x08U  /$\ast$ General call flag $\ast$/
\item 
\#define {\bfseries A\+D\+D\+R\+\_\+10}~0x10U  /$\ast$ 10-\/bit addr flag $\ast$/
\item 
\#define {\bfseries A\+D\+D\+R\+\_\+7}~0x20U  /$\ast$ 7-\/bit addr flag $\ast$/
\item 
\#define {\bfseries A\+V\+A\+I\+L\+A\+B\+L\+E\+\_\+\+E\+V\+E\+N\+T\+S\+\_\+\+M\+A\+SK}~(\mbox{\hyperlink{group___p_e___types__module_ga187d9ac85a01b75a8f871d72b9cd5fe3}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+O\+N\+\_\+\+M\+A\+S\+T\+E\+R\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+E\+NT}} $\vert$ \mbox{\hyperlink{group___p_e___types__module_gac4694457514889498da89fa1afe27412}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+O\+N\+\_\+\+M\+A\+S\+T\+E\+R\+\_\+\+B\+L\+O\+C\+K\+\_\+\+R\+E\+C\+E\+I\+V\+ED}})
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{struct_c_i2_c1___t_device_data}{C\+I2\+C1\+\_\+\+T\+Device\+Data}} $\ast$ {\bfseries C\+I2\+C1\+\_\+\+T\+Device\+Data\+Ptr}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\bfseries P\+E\+\_\+\+I\+SR} (C\+I2\+C1\+\_\+\+Interrupt)
\item 
\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$ \mbox{\hyperlink{group___c_i2_c1__module_ga340c0a885f1e994269dd5f33fc616f32}{C\+I2\+C1\+\_\+\+Init}} (\mbox{\hyperlink{group___p_e___types__module_ga0b66a73f87238a782318aa0be7578e35}{L\+D\+D\+\_\+\+T\+User\+Data}} $\ast$User\+Data\+Ptr)
\begin{DoxyCompactList}\small\item\em Initializes the device. Allocates memory for the device data structure, allocates interrupt vectors and sets interrupt priority, sets pin routing, sets timing, etc. If the \char`\"{}\+Enable in init. code\char`\"{} is set to \char`\"{}yes\char`\"{} value then the device is also enabled(see the description of the Enable() method). In this case the Enable() method is not necessary and needn\textquotesingle{}t to be generated. This method can be called only once. Before the second call of Init() the Deinit() must be called first. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_i2_c1__module_gabc03b5a52833888a39c4e7c7f84632c9}{C\+I2\+C1\+\_\+\+Deinit}} (\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$Device\+Data\+Ptr)
\begin{DoxyCompactList}\small\item\em Deinitializes the device. Switches off the device, frees the device data structure memory, interrupts vectors, etc. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___p_e___types__module_ga24c2b045fd04e79e85f261ce4df35588}{L\+D\+D\+\_\+\+T\+Error}} \mbox{\hyperlink{group___c_i2_c1__module_gaa461c589e2573dab219dae622c1f9ea4}{C\+I2\+C1\+\_\+\+Master\+Send\+Block}} (\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$Device\+Data\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gade8ef9401405bd941b6da738b807f980}{L\+D\+D\+\_\+\+T\+Data}} $\ast$Buffer\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gaa7fd2bc3f1f93e051058f9e70349c2b9}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Size}} Size, \mbox{\hyperlink{group___p_e___types__module_gacac4ade6fbcd28c9ddcd864242063ec8}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Send\+Stop}} Send\+Stop)
\begin{DoxyCompactList}\small\item\em This method writes one (7-\/bit addressing) or two (10-\/bit addressing) slave address bytes inclusive of R/W bit = 0 to the I2C bus and then writes the block of characters to the bus. The slave address must be specified before, by the \char`\"{}\+Select\+Slave\+Device\char`\"{} method or in component initialization section, \char`\"{}\+Target slave address init\char`\"{} property. If the method returns E\+R\+R\+\_\+\+OK, it doesn\textquotesingle{}t mean that transmission was successful. The state of transmission is detectable by means of events (On\+Master\+Send\+Complete or On\+Error). Data to be sent are not copied to an internal buffer and remains in the original location. Therefore the content of the buffer should not be changed until the transmission is complete. Event \char`\"{}\+On\+Master\+Block\+Sent\char`\"{}can be used to detect the end of the transmission. This method is available only for the M\+A\+S\+T\+ER or M\+A\+S\+T\+ER -\/ S\+L\+A\+VE mode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___p_e___types__module_ga24c2b045fd04e79e85f261ce4df35588}{L\+D\+D\+\_\+\+T\+Error}} \mbox{\hyperlink{group___c_i2_c1__module_ga361e50c9c40b74cdd1d37f9729d1e4dd}{C\+I2\+C1\+\_\+\+Master\+Receive\+Block}} (\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$Device\+Data\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gade8ef9401405bd941b6da738b807f980}{L\+D\+D\+\_\+\+T\+Data}} $\ast$Buffer\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gaa7fd2bc3f1f93e051058f9e70349c2b9}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Size}} Size, \mbox{\hyperlink{group___p_e___types__module_gacac4ade6fbcd28c9ddcd864242063ec8}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Send\+Stop}} Send\+Stop)
\begin{DoxyCompactList}\small\item\em This method writes one (7-\/bit addressing) or two (10-\/bit addressing) slave address bytes inclusive of R/W bit = 1 to the I2C bus and then receives the block of characters from the bus. The slave address must be specified before, by the \char`\"{}\+Select\+Slave\+Device\char`\"{} method or in component initialization section, \char`\"{}\+Target slave address init\char`\"{} property. If the method returns E\+R\+R\+\_\+\+OK, it doesn\textquotesingle{}t mean that reception was successful. The state of reception is detectable by means of events (On\+Master\+Send\+Complete or On\+Error). Data to be received are not copied to an internal buffer and remains in the original location. Therefore the content of the buffer should not be changed until the transmission is complete. Event \char`\"{}\+On\+Master\+Block\+Received\char`\"{}can be used to detect the end of the reception. This method is available only for the M\+A\+S\+T\+ER or M\+A\+S\+T\+ER -\/ S\+L\+A\+VE mode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___p_e___types__module_ga24c2b045fd04e79e85f261ce4df35588}{L\+D\+D\+\_\+\+T\+Error}} \mbox{\hyperlink{group___c_i2_c1__module_gaab2f3efe50ee5b9aeebb3bc34a010137}{C\+I2\+C1\+\_\+\+Select\+Slave\+Device}} (\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$Device\+Data\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gaccbea298b282be066f72f84d126a5f08}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Addr\+Type}} Addr\+Type, \mbox{\hyperlink{group___p_e___types__module_ga3f15c9fc3d89b1a0eb58b1b57efcf06a}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Addr}} Addr)
\begin{DoxyCompactList}\small\item\em This method selects a new slave for communication by its 7-\/bit slave, 10-\/bit address or general call value. Any send or receive method directs to or from selected device, until a new slave device is selected by this method. This method is available for the M\+A\+S\+T\+ER mode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___p_e___types__module_ga24c2b045fd04e79e85f261ce4df35588}{L\+D\+D\+\_\+\+T\+Error}} \mbox{\hyperlink{group___c_i2_c1__module_ga856c87298362a2a4d8f8bacf912ee96e}{C\+I2\+C1\+\_\+\+Get\+Error}} (\mbox{\hyperlink{group___p_e___types__module_gac5cf1362f1f0e3a2ce71b1bf2276d091}{L\+D\+D\+\_\+\+T\+Device\+Data}} $\ast$Device\+Data\+Ptr, \mbox{\hyperlink{group___p_e___types__module_gafbfe03ba42af321ee5bbe91a8bac073f}{L\+D\+D\+\_\+\+I2\+C\+\_\+\+T\+Error\+Mask}} $\ast$Error\+Mask\+Ptr)
\begin{DoxyCompactList}\small\item\em Returns value of error mask, e.\+g. L\+D\+D\+\_\+\+I2\+C\+\_\+\+A\+R\+B\+I\+T\+\_\+\+L\+O\+ST. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This component encapsulates the internal I2C communication interface. The implementation of the interface is based on the Philips I2\+C-\/bus specification version 2.\+0. Interface features\+: M\+A\+S\+T\+ER mode. 

\begin{DoxyVersion}{Version}
01.\+07
\begin{DoxyItemize}
\item Multi master communication
\item The combined format of communication possible (see Send\+Stop parameter in Master\+Send/\+Receive\+Block method)
\item 7-\/bit slave addressing (10-\/bit addressing can be made as well)
\item Acknowledge polling provided
\item No wait state initiated when a slave device holds the S\+CL line low
\item Holding of the S\+CL line low by slave device recognized as \textquotesingle{}not available bus\textquotesingle{}
\item Invalid start/stop condition detection provided S\+L\+A\+VE mode
\item 7-\/bit slave addressing
\item General call address detection provided 
\end{DoxyItemize}
\end{DoxyVersion}
